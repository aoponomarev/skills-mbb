---
title: architecture-loading
tags:
  - "#mbb-spec"
  - "#architecture"
dependencies: []
mcp_resource: true
updated_at: 2026-01-24
---
## Scope

- Architecture Loading functionality and configuration.

## When to Use

- При необходимости работы с данным компонентом или функционалом.



# architecture-loading

> Источник: `docs/doc-architect.md` (разделы "Технические ограничения" и "Принципы модульности")

## Критический порядок загрузки x-template

**КРИТИЧЕСКИ ВАЖНО:** `script type="text/x-template"` должен быть в DOM **до** загрузки Vue.js и компонентов.

**Правильный порядок в `index.html`:**
1. Bootstrap JS
2. x-template шаблоны
3. Vue.js
4. Компоненты
5. `app-ui-root.js`

**Обоснование:** Vue ищет шаблоны в DOM при инициализации. Если шаблон загружается позже, компонент не монтируется.

## Размещение компонентов и запросы

- Все Vue‑компоненты должны располагаться внутри `<div id="app">`.
- Внешние HTTP‑запросы не запускать вне `#app`, пока сплэш‑экран не разблокирован.

## Модульная система загрузки

**Реализация:** `core/modules-config.js` + `core/module-loader.js`.

**Ключевые свойства:**
- Топологическая сортировка зависимостей (алгоритм Kahn)
- Обнаружение циклов зависимостей
- Асинхронная загрузка через `<script>`
- Поддержка `file://` и `http(s)://`
- Критичные модули прерывают загрузку при ошибке, некритичные — продолжают

**Порядок загрузки (автоматически):**
1. Утилиты
2. Core‑модули
3. Шаблоны
4. Библиотеки
5. Компоненты
6. Приложение (`app-ui-root`)
