---
title: architecture-ssot
tags:
  - "#mbb-spec"
  - "#architecture"
dependencies: []
mcp_resource: true
updated_at: 2026-01-24
---
## Scope

- Architecture Ssot functionality and configuration.

## When to Use

- При необходимости работы с данным компонентом или функционалом.

# architecture-ssot

> Источник: `docs/doc-architect.md` (раздел "Единый источник правды")

## Принцип единого источника правды (ееиипп)

**КРИТИЧЕСКИ ВАЖНО:** При наличии дублирующихся значений (заголовки, тексты, конфигурации, настройки) используется единый источник правды — конфигурационные файлы в `core/config/` и `core/cache/` или переиспользуемые компоненты. 

**Команда активации:** `ееиипп` (Единый Источник Правды). При ее использовании агент обязан проверить отсутствие хардкода и соответствие SSOT.

**Обоснование:** Единый источник правды гарантирует единообразие данных, упрощает поддержку, устраняет риск рассинхронизации между компонентами и статическими примерами, обеспечивает консистентность UX.

## Конфигурационные файлы

Ключевые точки централизации:
- `core/config/modals-config.js` — заголовки, иконки, метаданные модальных окон
- `core/cache/cache-config.js` — TTL, версии схем, стратегии кэширования
- `core/config/app-config.js` — API endpoints, лимиты, таймауты, feature flags
- `core/modules-config.js` — порядок загрузки и зависимости модулей

## Правила работы с конфигурацией

1. Всегда использовать функции-геттеры из конфигурации вместо хардкода.
2. Не дублировать значения в разных местах.
3. Перед дублированием проверить наличие конфигурационных файлов.
4. При необходимости создавать новые конфигурационные файлы для централизации значений.
5. Статические примеры должны использовать ту же конфигурацию, что и рабочие компоненты.

## Переиспользуемые компоненты

Дублирующаяся разметка и логика выносятся в `shared/components/`. См. `docs/doc-comp-principles.md` (раздел "Единый источник правды").

## Централизованная реактивная локализация

**КРИТИЧЕСКИ ВАЖНО:** Все новые и редактируемые элементы интерфейса должны использовать централизованную систему реактивной локализации для мгновенного переключения между RU/EN без перезагрузки.

**Ключевые элементы:**
- `uiState.tooltips.currentLanguage` — реактивное состояние языка (`core/state/ui-state.js`)
- `core/config/tooltips-config.js` — единый источник текстов (RU/EN)
- `getTooltip(key)` — получение текста по ключу с учетом языка

**Правила:**
- Тексты и заголовки берутся через `tooltipsConfig.getTooltip()`
- Ключи имеют префикс функциональной области (`ui.`, `metric.`, `modal.`)
- RU/EN версии добавляются одновременно
- `currentLanguage` используется только в `computed`, а не в `data()`
