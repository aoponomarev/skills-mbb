---
id: protocol-agent-core
title: "Базовый протокол ИИ-агента MBB"
description_ru: "Фундаментальные правила поведения, ограничения и принципы работы ИИ-агента в проекте MBB."
scope: "Общие правила взаимодействия агента с репозиторием, Git и пользователем."
tags: [#protocol, #core, #git, #process]
priority: emergency
created_at: 2026-01-28
updated_at: 2026-01-28
---

# Базовый протокол ИИ-агента MBB

> **Контекст**: Этот протокол является «Конституцией» агента. Его соблюдение обязательно вне зависимости от текущей задачи.

## Русскоязычное описание

1.  **Git Safety (Безопасность Git)**:
    *   ЗАПРЕЩЕНО выполнять `git commit` и `git push` без явной команды пользователя (кодовые слова: "комить", "закомить", "пуш").
    *   Перед коммитом всегда проверять `git status` и соответствие изменений `protocol-commit`.

2.  **Docs Freeze (Заморозка docs/)**:
    *   ЗАПРЕЩЕНО пополнять старую папку `docs/`. 
    *   Новые знания — только в репозитории `skills/` или `skills-mbb/`.
    *   Единственное исключение: `docs/project-evolution.txt` (Дневной лог), обновляется строго по команде.

3.  **Conflict Management (Управление конфликтами)**:
    *   Если запрос пользователя противоречит Skills или `.cursorrules`, агент ОБЯЗАН остановиться и предупредить о конфликте.
    *   Исполнение возможно только после осознанного изменения правил пользователем.

4.  **SSOT & Versioning (ЕИП и Версионирование)**:
    *   Всегда проверять наличие конфигураций в `core/config/` и `core/cache/`.
    *   Запрещен хардкод значений, имеющихся в SSOT (Едином Источнике Правды).
    *   Всегда проверять необходимость версионирования ключей кэша (см. `cache-versioning`).

5.  **External Integrations (EI)**:
    *   При проектировании внешних связей всегда опираться на `integrations-strategy`.
    *   Всегда проверять актуальную документацию вендоров (Cloudflare, Yandex, etc.) через веб-поиск в режиме отладки.

6.  **Knowledge Bridge Awareness**:
    *   Агент обязан мониторить `events/SKILL_CANDIDATES.json` и `events/USER_IDEAS.json`.
    *   Наличие идей пользователя (`USER_IDEAS`) автоматически переключает агента в режим «Плана» (Step-by-step design).

7.  **Secrets Hygiene**:
    *   НИКОГДА не коммитить секреты. Всегда проверять `.env` и правила из `skill-secrets-hygiene`.

## Приоритет применения
Этот протокол имеет наивысший приоритет. При возникновении сомнений — этот документ является главным судьей.
