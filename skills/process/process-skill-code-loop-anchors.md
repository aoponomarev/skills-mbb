---
id: process-skill-code-loop-anchors
title: Process: Skill-to-Code Loop Anchors
scope: skills-mbb
tags: [#process, #meta-skill, #cross-links, #comments, #regression]
priority: high
created_at: 2026-02-12
updated_at: 2026-02-12
---

# Process: Skill-to-Code Loop Anchors

> **Context**: В MBB сложные баги часто повторяются как "новые", хотя паттерн решения уже оформлен в skills.
> **Цель**: привязать паттерн к коду в точках повторного риска.

## 1. Триггер
Применять всегда, когда:
- создается новый skill;
- существенно обновляется существующий skill;
- фикс оформляет повторяемый паттерн (retry/fallback/merge/cache).

## 2. Принцип размещения ссылок
Недостаточно только шапки файла.  
Ссылки должны стоять в ветках, где разработчик снова пойдет "искать с нуля":
- `retry/backoff` и `429` обработка;
- fallback ветки (локальный кэш / stale cache);
- merge + dedup логика наборов;
- классификация ошибок/статусов;
- cache-guard и invalidation развилки.

## 3. Протокол
1. **Извлечь правило** из нового/обновленного skill.
2. **Найти hotspot** в коде, где это правило реально исполняется.
3. **Добавить короткий якорный комментарий** с путем к skill и смыслом ветки.
4. **Не спамить**: 1 якорь на кластер риска обычно достаточно.
5. **Проверить связность**: индекс skills и валидность путей.

## 4. Формат якоря
```js
// Skill anchor: защищает от регрессии в 429/retry ветке.
// See skills-mbb/skills/...
```

## 5. Критерий готовности
- У каждого нового/обновленного skill есть хотя бы один non-header якорь в risk-ветке.
- По комментарию понятно, почему ветка существует.
- В коде нет "декоративных" ссылок вне проблемных мест.
