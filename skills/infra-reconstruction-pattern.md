---
id: infra-reconstruction-pattern
title: "Паттерн пошаговой реконструкции инфраструктуры"
description_ru: "Методология глубокого анализа и планирования изменений в сложных распределенных системах ИИ-агентов."
project_type: Skill
category: Architecture
tags: [process, architecture, planning]
created_at: 2026-02-06
---

# Паттерн пошаговой реконструкции инфраструктуры

Данный скилл описывает стандартный процесс (Workflow) для ИИ-агента при получении задачи на масштабную переработку или "реконструкцию" существующей инфраструктуры.

## 1. Фаза обнаружения (Discovery)
- **Инвентаризация источников**: Найти все файлы конфигурации, реестры, логи и переменные окружения, которые участвуют в процессе.
- **Мапинг зависимостей**: Определить, как данные текут между узлами (например, OneDrive -> Local Script -> Server -> UI).
- **Поиск "скрытой статики"**: Выявить жестко зашитые (hardcoded) значения в HTML, JS или системных скриптах.

## 2. Фаза конфликтного анализа (Conflict Analysis)
- **Выявление противоречий**: Найти места, где разные источники данных об одном и том же объекте могут "спорить" (например, ID модели в YAML не совпадает с ID в JSON).
- **Анализ состояний**: Проверить возможность "состояния Шрёдингера" (например, агент активен в софте, но недоступен по ключам в харде).
- **Риски Race Condition**: Оценить вероятность одновременной записи в один файл разными процессами.

## 3. Фаза комплексного планирования (Complex Planning)
- **Создание живого документа**: План должен быть записан в корень проекта (например, `INFRA_RECONSTRUCTION.md`).
- **Обязательность чекбоксов**: К КАЖДОМУ пункту плана (включая подпункты) должен быть проставлен чекбокс `[ ]`. Это критично для трекинга прогресса.
- **Максимальная детализация**: План НЕ должен быть кратким. В каждый пункт необходимо включать полный контекст: пути к файлам, названия функций, логику условий (if/else), ожидаемые форматы данных (JSON/YAML) и причины изменений. Это гарантирует, что контекст не будет потерян при переключении между сессиями или агентами.
- **Принцип SSOT (Single Source of Truth)**: Каждое изменение должно вести к сокращению количества источников правды.
- **Глобализация**: Стремление к выносу проектно-независимых данных в глобальную зону (OneDrive/Cloud).
- **Обратная совместимость**: План должен включать шаги по миграции данных без их потери.

## 4. Фаза реализации и верификации (Execution & Verification)
- **Атомарные шаги**: Каждая отметка в чекбоксе должна соответствовать одному логически завершенному изменению.
- **Самопроверка (Self-Check)**: После каждого шага агент обязан проверить работоспособность системы (curl, lints, logs).
- **Ревизия при новых фактах**: Если в процессе реализации обнаружены новые обстоятельства, противоречия или более оптимальные пути, агент ОБЯЗАН немедленно приостановить выполнение и пересмотреть ранее написанные пункты плана (v1.0 -> v2.0). Это решающий фактор финального качества.

## 5. Фаза фиксации (Closing)
- **Документирование**: Обновление всех связанных `docs/*.md`.
- **Очистка**: Удаление временных файлов, бэкапов и "костылей", которые стали ненужными после реконструкции.
